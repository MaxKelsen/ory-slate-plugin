{"version":3,"sources":["../../src/plugins/emphasize.js"],"names":["React","BoldIcon","ItalicIcon","UnderlinedIcon","StrikethroughIcon","SizeIcon","TextFieldsIcon","makeTagMark","ToolbarButton","Plugin","STRONG","EM","U","S","SUB","SUP","createButton","type","icon","editorState","onChange","onClick","e","preventDefault","transform","toggleMark","apply","isActive","marks","some","mark","EmphasizePlugin","name","onKeyDown","data","state","isMod","key","hoverButtons","deserialize","el","next","tagName","toLowerCase","kind","nodes","childNodes","serialize","object","children","styles","sub","position","bottom","fontSize","sup","top"],"mappings":"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","file":"emphasize.js","sourcesContent":["/* eslint-disable prefer-reflect, default-case, react/display-name */\nimport React from 'react'\nimport BoldIcon from 'material-ui-icons/FormatBold'\nimport ItalicIcon from 'material-ui-icons/FormatItalic'\nimport UnderlinedIcon from 'material-ui-icons/FormatUnderlined'\nimport StrikethroughIcon from 'material-ui-icons/FormatStrikethrough'\nimport SizeIcon from 'material-ui-icons/FormatSize'\nimport TextFieldsIcon from 'material-ui-icons/TextFields'\nimport { makeTagMark, ToolbarButton } from '../helpers'\nimport Plugin from './Plugin'\nimport type { Props } from './props'\n\nexport const STRONG = 'EMPHASIZE/STRONG'\nexport const EM = 'EMPHASIZE/EM'\nexport const U = 'EMPHASIZE/U'\nexport const S = 'EMPHASIZE/S'\nexport const SUB = 'EMPHASIZE/SUB'\nexport const SUP = 'EMPHASIZE/SUP'\n\n// eslint-disable-next-line react/display-name\nconst createButton = (type, icon) => ({ editorState, onChange }: Props) => {\n  const onClick = e => {\n    e.preventDefault()\n\n    onChange(\n      editorState\n        .transform()\n        .toggleMark(type)\n        .apply()\n    )\n  }\n\n  const isActive =\n    editorState && editorState.marks.some(mark => mark.type === type)\n\n  return <ToolbarButton onClick={onClick} isActive={isActive} icon={icon} />\n}\n\nexport default class EmphasizePlugin extends Plugin {\n  props: Props\n\n  name = 'emphasize'\n\n  marks = {\n    [STRONG]: makeTagMark('strong'),\n    [EM]: makeTagMark('em'),\n    [U]: makeTagMark('u'),\n    [S]: makeTagMark('s'),\n    [SUB]: makeTagMark('sub'),\n    [SUP]: makeTagMark('sup')\n  }\n\n  onKeyDown = (e: Event, data: { key: string, isMod: boolean }, state) => {\n    if (data.isMod) {\n      let mark\n\n      switch (data.key) {\n        case 'b':\n          mark = STRONG\n          break\n        case 'i':\n          mark = EM\n          break\n        case 'u':\n          mark = U\n          break\n        case 'k':\n          mark = S\n          break\n        default:\n          return\n      }\n\n      return state\n        .transform()\n        .toggleMark(mark)\n        .apply()\n    }\n  }\n\n  hoverButtons = [\n    createButton(STRONG, <BoldIcon />),\n    createButton(EM, <ItalicIcon />),\n    createButton(U, <UnderlinedIcon />),\n    createButton(S, <StrikethroughIcon />),\n    createButton(SUB, <TextFieldsIcon />),\n    createButton(SUP, <SizeIcon />)\n  ]\n\n  deserialize = (el, next) => {\n    switch (el.tagName.toLowerCase()) {\n      case 'strong':\n      case 'b':\n        return {\n          kind: 'mark',\n          type: STRONG,\n          nodes: next(el.childNodes)\n        }\n      case 'em':\n      case 'i':\n        return {\n          kind: 'mark',\n          type: EM,\n          nodes: next(el.childNodes)\n        }\n      case 'u':\n        return {\n          kind: 'mark',\n          type: U,\n          nodes: next(el.childNodes)\n        }\n      case 's':\n        return {\n          kind: 'mark',\n          type: S,\n          nodes: next(el.childNodes)\n        }\n      case 'sub':\n        return {\n          kind: 'mark',\n          type: SUB,\n          nodes: next(el.childNodes)\n        }\n      case 'sup':\n        return {\n          kind: 'mark',\n          type: SUP,\n          nodes: next(el.childNodes)\n        }\n    }\n  }\n\n  serialize = (object: { type: string, kind: string }, children: any[]) => {\n    const styles = {\n      sub: {\n        position: 'relative',\n        bottom: '0.5em',\n        fontSize: '0.8em'\n      },\n      sup: {\n        position: 'relative',\n        top: '0.3em',\n        fontSize: '0.8em'\n      }\n    };\n\n    if (object.kind !== 'mark') {\n      return\n    }\n    switch (object.type) {\n      case STRONG:\n        return <strong>{children}</strong>\n      case EM:\n        return <em>{children}</em>\n      case U:\n        return <u>{children}</u>\n      case S:\n        return <s>{children}</s>\n      case SUB:\n        return <span style={styles.sub}>{children}</span>\n      case SUP:\n        return <span style={styles.sup}>{children}</span>\n    }\n  }\n}\n"]}