{"version":3,"sources":["../../../src/plugins/code/index.js"],"names":["CODE","CodePlugin","props","createButton","type","icon","Button","editorState","onChange","onClick","e","preventDefault","transform","toggleMark","apply","isActive","marks","some","mark","createNodeButton","blocks","block","setBlock","DEFAULT_NODE","name","nodes","deserialize","el","next","tagName","toLowerCase","kind","data","create","childNodes","serialize","object","children","overflow"],"mappings":";;;;;;;AACA;;;;AACA;;;;AACA;;AACA;;AACA;;;;AACA;;;;;;;;;;;;+eANA;;;AASO,IAAMA,sBAAO,WAAb;;IAEcC,U;;;AACnB,sBAAYC,KAAZ,EAA0B;AAAA;;AAAA,wHAClBA,KADkB;;AAAA,UAQ1BC,YAR0B,GAQX,UAACC,IAAD,EAAOC,IAAP,EAAgB;AAC7B,UAAMC,SAAS,SAATA,MAAS,OAAsC;AAAA,YAAnCC,WAAmC,QAAnCA,WAAmC;AAAA,YAAtBC,QAAsB,QAAtBA,QAAsB;;AACnD,YAAMC,UAAU,SAAVA,OAAU,IAAK;AACnBC,YAAEC,cAAF;;AAEAH,mBACED,YACGK,SADH,GAEGC,UAFH,CAEcT,IAFd,EAGGU,KAHH,EADF;AAMD,SATD;;AAWA,YAAMC,WACJR,eAAeA,YAAYS,KAAZ,CAAkBC,IAAlB,CAAuB;AAAA,iBAAQC,KAAKd,IAAL,KAAcA,IAAtB;AAAA,SAAvB,CADjB;;AAGA,eAAO,IAAP;AACA;AACA;AACD,OAlBD;;AAoBA,aAAOE,MAAP;AACD,KA9ByB;;AAAA,UAgC1Ba,gBAhC0B,GAgCP,UAACf,IAAD,EAAOC,IAAP,EAAgB;AACjC,UAAMC,SAAS,SAATA,MAAS,QAAsC;AAAA,YAAnCC,WAAmC,SAAnCA,WAAmC;AAAA,YAAtBC,QAAsB,SAAtBA,QAAsB;;AACnD,YAAMC,UAAU,SAAVA,OAAU,IAAK;AACnBC,YAAEC,cAAF;;AAEA,cAAMI,WAAWR,YAAYa,MAAZ,CAAmBH,IAAnB,CAAwB;AAAA,mBAASI,MAAMjB,IAAN,KAAeA,IAAxB;AAAA,WAAxB,CAAjB;;AAEAI,mBACED,YACGK,SADH,GAEGU,QAFH,CAEYP,WAAW,MAAKQ,YAAhB,GAA+BnB,IAF3C,EAGGU,KAHH,EADF;AAMD,SAXD;;AAcA,eAAO,IAAP;AACA;AACA;AACD,OAlBD;;AAoBA,aAAOR,MAAP;AACD,KAtDyB;;AAAA,UAwD1BkB,IAxD0B,GAwDnB,MAxDmB;AAAA,UA0D1BR,KA1D0B,uBA0DfhB,IA1De,EA0DR,0BAAY,MAAZ,CA1DQ;AAAA,UA2D1ByB,KA3D0B,uBA2DfzB,IA3De;;AAAA,UAgE1B0B,WAhE0B,GAgEZ,UAACC,EAAD,EAAKC,IAAL,EAAc;AAC1B,cAAQD,GAAGE,OAAH,CAAWC,WAAX,EAAR;AACE,aAAK,MAAL;AACE,iBAAO;AACLC,kBAAM,MADD;AAEL3B,kBAAMJ,IAFD;AAGLgC,kBAAM,YAAKC,MAAL,CAAY,EAAZ,CAHD;AAILR,mBAAOG,KAAKD,GAAGO,UAAR;AAJF,WAAP;AAMF,aAAK,KAAL;AACE,iBAAO;AACLH,kBAAM,OADD;AAEL3B,kBAAMJ,IAFD;AAGLyB,mBAAOG,KAAKD,GAAGO,UAAR;AAHF,WAAP;AATJ;AAeD,KAhFyB;;AAAA,UAkF1BC,SAlF0B,GAkFd,UACVC,MADU,EAEVC,QAFU,EAGP;AACH,UAAID,OAAOL,IAAP,KAAgB,MAApB,EAA4B;AAC1B,gBAAQK,OAAOhC,IAAf;AACE,eAAKJ,IAAL;AACE,mBAAO;AAAA;AAAA;AAAOqC;AAAP,aAAP;AAFJ;AAID,OALD,MAKO,IAAID,OAAOL,IAAP,KAAgB,OAApB,EAA6B;AAClC,gBAAQK,OAAOhC,IAAf;AACE,eAAKJ,IAAL;AACE,mBACE;AAAA;AAAA,gBAAK,OAAO,EAAEsC,UAAU,QAAZ,EAAZ;AACE;AAAA;AAAA;AAAOD;AAAP;AADF,aADF;AAFJ;AAQD;AACF,KArGyB;;AAGxB,UAAKd,YAAL,GAAoBrB,MAAMqB,YAA1B;AAHwB;AAIzB;;AAyDD;AACA;;;;;kBA/DmBtB,U","file":"index.js","sourcesContent":["/* eslint-disable prefer-reflect, default-case, react/display-name */\nimport React from 'react'\nimport CodeIcon from 'material-ui-icons/Code'\nimport { Data } from 'slate'\nimport { makeTagMark, ToolbarButton } from '../../helpers'\nimport Plugin from '../Plugin'\nimport Code from './node'\nimport type { Props } from '../props'\n\nexport const CODE = 'CODE/CODE'\n\nexport default class CodePlugin extends Plugin {\n  constructor(props: Props) {\n    super(props)\n\n    this.DEFAULT_NODE = props.DEFAULT_NODE\n  }\n\n  props: Props\n\n  createButton = (type, icon) => {\n    const Button = ({ editorState, onChange }: Props) => {\n      const onClick = e => {\n        e.preventDefault()\n\n        onChange(\n          editorState\n            .transform()\n            .toggleMark(type)\n            .apply()\n        )\n      }\n\n      const isActive =\n        editorState && editorState.marks.some(mark => mark.type === type)\n\n      return null;\n      // see backwards compatability note in blockquote.\n      //return <ToolbarButton onClick={onClick} isActive={isActive} icon={icon} />\n    }\n\n    return Button\n  }\n\n  createNodeButton = (type, icon) => {\n    const Button = ({ editorState, onChange }: Props) => {\n      const onClick = e => {\n        e.preventDefault()\n\n        const isActive = editorState.blocks.some(block => block.type === type)\n\n        onChange(\n          editorState\n            .transform()\n            .setBlock(isActive ? this.DEFAULT_NODE : type)\n            .apply()\n        )\n      }\n\n\n      return null;\n      // see backwards compatability note in blockquote.\n      //const isActive = editorState.blocks.some(block => block.type === type)\n    }\n\n    return Button\n  }\n\n  name = 'code'\n\n  marks = { [CODE]: makeTagMark('code') }\n  nodes = { [CODE]: Code }\n\n  //hoverButtons = [this.createButton(CODE, <CodeIcon />)]\n  //toolbarButtons = [this.createNodeButton(CODE, <CodeIcon />)]\n\n  deserialize = (el, next) => {\n    switch (el.tagName.toLowerCase()) {\n      case 'code':\n        return {\n          kind: 'mark',\n          type: CODE,\n          data: Data.create({}),\n          nodes: next(el.childNodes)\n        }\n      case 'pre':\n        return {\n          kind: 'block',\n          type: CODE,\n          nodes: next(el.childNodes)\n        }\n    }\n  }\n\n  serialize = (\n    object: { type: string, kind: string, data: any },\n    children: any[]\n  ) => {\n    if (object.kind === 'mark') {\n      switch (object.type) {\n        case CODE:\n          return <code>{children}</code>\n      }\n    } else if (object.kind === 'block') {\n      switch (object.type) {\n        case CODE:\n          return (\n            <pre style={{ overflow: 'scroll' }}>\n              <code>{children}</code>\n            </pre>\n          )\n      }\n    }\n  }\n}\n"]}